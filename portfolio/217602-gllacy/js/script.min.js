var link=document.querySelector(".map__contacts-btn"),popup=document.querySelector(".feedback"),close=document.querySelector(".feedback__form-btn-close"),overlay=document.querySelector(".feedback-overlay"),feedback=popup.querySelector(".feedback__form"),name=popup.querySelector("[name=name]"),email=popup.querySelector("[name=email]"),textarea=popup.querySelector("[name=textarea]"),isStorageSupport=!0,storage="";try{storage=localStorage.getItem("name")}catch(e){isStorageSupport=!1}link.addEventListener("click",function(e){e.preventDefault(),overlay.classList.add("feedback-overlay__show"),popup.classList.add("feedback__show"),storage?(name.value=storage,email.focus()):name.focus()}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("feedback__show"),popup.classList.remove("feedback__error"),overlay.classList.remove("feedback-overlay__show")}),feedback.addEventListener("submit",function(e){name.value&&email.value&&textarea.value?isStorageSupport&&localStorage.setItem("name",name.value):(e.preventDefault(),popup.classList.remove("feedback__error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("feedback__error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("feedback__show")&&(popup.classList.remove("feedback__show"),popup.classList.remove("feedback__error"),overlay.classList.remove("feedback-overlay__show")))});